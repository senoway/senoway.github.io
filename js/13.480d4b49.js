(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1a02":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("q-btn",{attrs:{color:"primary",label:"Start"},on:{click:e.onClickStart}}),n("q-btn",{attrs:{color:"secondary",label:"Stop"},on:{click:e.onClickStop}}),n("br"),n("hr"),e._v("\n  # 認識中 BOX"),n("br"),n("div",{ref:"tmpBox",staticStyle:{"background-color":"#eee",padding:"20px"}}),n("hr"),e._v("\n  # 認識結果 BOX"),n("br"),n("div",{ref:"asrBox",staticStyle:{"background-color":"#9AE8EC",padding:"20px"}})],1)},a=[],s=(n("3b2b"),n("a481"),{data:function(){return{socket:null,room:""}},methods:{onClickStart:function(){this.$recognition.start()},onClickStop:function(){this.$recognition.stop()},onText:function(e){var t=e.detail,n=t.text,o=t.isFinal;o?(this.addMessage("Me",n),this.sendWsMessage(n)):this.addTmp(n)},addTmp:function(e){var t=this.$refs.tmpBox;t.innerHTML=e},addMessage:function(e,t){this.addTmp("");var n=this.$refs.asrBox,o=document.createElement("p");o.innerHTML='<p style="margin: 10px 0">'.concat(e,": ").concat(t,"</p>"),n.appendChild(o)},sendWsMessage:function(e){if(this.socket&&this.room){var t={action:"message",data:{type:"MESSAGE_TO_ROOM",roomName:this.room,message:e}};this.socket.send(JSON.stringify(t))}},initWs:function(){var e=this,t=this.getParam("name"),n=this.getParam("room");if(console.log({name:t,room:n}),t&&n){this.room=n;var o="wss://m6b9mc34m0.execute-api.ap-northeast-1.amazonaws.com/shyme_websocket_prod",a=new WebSocket(o);this.socket=a,a.addEventListener("open",(function(){console.log("WS Connected!!");var e='{"action":"message","data":{"type":"I_AM_THIS","userKey":"'.concat(t,'","userName":"').concat(t,'","email":"sample@shyme.net","rooms":["').concat(n,'"]}}');a.send(e)})),a.addEventListener("message",(function(n){var o=n.data,a=JSON.parse(o),s=a.type,r=a.data;if("MESSAGE_TO_ROOM"===s){var i=r.from,c=r.message,d=i.userName,m=i.userKey;m!==t&&e.addMessage(d,c)}}))}},getParam:function(e){var t=window.location.href;e=e.replace(/[[]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}},computed:{url:function(){return this.$router.currentRoute.path}},mounted:function(){var e=this.$recognition;e.on(e.EVENTS.TEXT,this.onText),this.initWs()}}),r=s,i=n("2877"),c=n("9989"),d=n("9c40"),m=n("eebe"),l=n.n(m),p=Object(i["a"])(r,o,a,!1,null,null,null);t["default"]=p.exports;l()(p,"components",{QPage:c["a"],QBtn:d["a"]})}}]);